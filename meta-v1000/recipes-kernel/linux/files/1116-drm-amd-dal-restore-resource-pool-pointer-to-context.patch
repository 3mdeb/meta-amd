From 40b00114d8ec6e23081214ee3d933ca4575a53a5 Mon Sep 17 00:00:00 2001
From: Dmytro Laktyushkin <Dmytro.Laktyushkin@amd.com>
Date: Fri, 23 Sep 2016 14:44:57 -0400
Subject: [PATCH 1116/1722] drm/amd/dal: restore resource pool pointer to
 context when resetting during power down

Change-Id: Ifcd45229489e8cca1c130affc8d8d4a46ae29069
Signed-off-by: Dmytro Laktyushkin <Dmytro.Laktyushkin@amd.com>
Acked-by: Harry Wentland <harry.wentland@amd.com>
Signed-off-by: Kalyan Alle <kalyan.alle@amd.com>
---
 drivers/gpu/drm/amd/dal/dc/core/dc.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/drivers/gpu/drm/amd/dal/dc/core/dc.c b/drivers/gpu/drm/amd/dal/dc/core/dc.c
index 3936d8b..d0dc2b2 100644
--- a/drivers/gpu/drm/amd/dal/dc/core/dc.c
+++ b/drivers/gpu/drm/amd/dal/dc/core/dc.c
@@ -1729,6 +1729,9 @@ void dc_set_power_state(
 		 */
 		memset(core_dc->current_context, 0,
 				sizeof(*core_dc->current_context));
+
+		core_dc->current_context->res_ctx.pool = core_dc->res_pool;
+
 		break;
 	}
 
-- 
2.7.4

