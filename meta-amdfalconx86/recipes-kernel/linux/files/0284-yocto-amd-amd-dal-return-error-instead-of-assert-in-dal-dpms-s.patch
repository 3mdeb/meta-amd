From d3b0adc1a621df8c73b245a728ee21a1a555f69b Mon Sep 17 00:00:00 2001
From: Mykola Lysenko <mykola.lysenko@amd.com>
Date: Mon, 31 Aug 2015 16:41:18 +0800
Subject: [PATCH 401/401] amd/dal: return error instead of assert in dal dpms
 sequence

Signed-off-by: Mykola Lysenko <mykola.lysenko@amd.com>
Reviewed-by: Harry Wentland <harry.wentland@amd.com>
Signed-off-by: Sanjay R Mehta <sanju.mehta@amd.com>
---
 drivers/gpu/drm/amd/dal/display_service/display_service.c | 12 ++++++------
 1 file changed, 6 insertions(+), 6 deletions(-)

diff --git a/drivers/gpu/drm/amd/dal/display_service/display_service.c b/drivers/gpu/drm/amd/dal/display_service/display_service.c
index f4ec624..0fac541 100644
--- a/drivers/gpu/drm/amd/dal/display_service/display_service.c
+++ b/drivers/gpu/drm/amd/dal/display_service/display_service.c
@@ -161,18 +161,18 @@ enum ds_return dal_display_service_target_power_control(
 				ds->ds_dispatch->set,
 				display_index);
 
-		ASSERT(path_data != NULL);
-		if (path_data != NULL)
-			path_data->flags.bits.TURN_OFF_BACK_END_AND_RX =
-				power_on ? 0 : 1;
+		if (!path_data)
+			return DS_ERROR;
+
+		path_data->flags.bits.TURN_OFF_BACK_END_AND_RX =
+			power_on ? 0 : 1;
 
 		/* Create hw_path_mode for this display path*/
 		if (!dal_ds_dispatch_build_hw_path_mode_for_adjustment(
 			ds->ds_dispatch,
 			&hw_path_mode,
 			display_index,
-			NULL
-			))
+			NULL))
 			/* DisplayIndex requested not in
 			 * currently active PathModeSet,
 			 * therefore invalid parameter
-- 
1.9.1

