From d12e2d87e322cf3706717d52407673b66af781df Mon Sep 17 00:00:00 2001
From: Chunming Zhou <David1.Zhou@amd.com>
Date: Wed, 29 Jun 2016 13:33:40 +0800
Subject: [PATCH 0277/1722] drm/amdgpu: remove evict vram
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Previous vm fault is since page talbe losts connection with vmid after gpu reset.
Now the issue is fixed by recovery. No need more.

If we want to save vram for some EDC card, we will need to consider a complete solution.

Signed-off-by: Chunming Zhou <David1.Zhou@amd.com>
Reviewed-by: Christian KÃ¶nig <christian.koenig@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Kalyan Alle <kalyan.alle@amd.com>
---
 drivers/gpu/drm/amd/amdgpu/amdgpu_device.c | 3 ---
 1 file changed, 3 deletions(-)

diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_device.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_device.c
index 5fd99b3..9088789 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_device.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_device.c
@@ -2000,9 +2000,6 @@ int amdgpu_gpu_reset(struct amdgpu_device *adev)
 	int resched;
 
 	atomic_inc(&adev->gpu_reset_counter);
-
-        /* evict vram memory */
-        amdgpu_bo_evict_vram(adev);
   
  	/* block scheduler */
         for (i = 0; i < AMDGPU_MAX_RINGS; ++i) {
-- 
2.7.4

