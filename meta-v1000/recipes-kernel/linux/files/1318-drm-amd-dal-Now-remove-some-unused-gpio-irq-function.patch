From 7ebd1c2822568c964a72e8e8b844fefc97a0b79d Mon Sep 17 00:00:00 2001
From: Harry Wentland <harry.wentland@amd.com>
Date: Wed, 12 Oct 2016 19:57:08 -0400
Subject: [PATCH 1318/1722] drm/amd/dal: Now remove some unused gpio irq
 functions

Change-Id: I305738db68c1d0030b6ad99b818a31dec1329e26
Signed-off-by: Harry Wentland <harry.wentland@amd.com>
Acked-by: Harry Wentland <harry.wentland@amd.com>
---
 drivers/gpu/drm/amd/dal/dc/gpio/ddc.c              |  4 ++--
 drivers/gpu/drm/amd/dal/dc/gpio/gpio_service.c     | 25 ----------------------
 drivers/gpu/drm/amd/dal/dc/gpio/irq.c              | 25 +---------------------
 .../drm/amd/dal/include/gpio_service_interface.h   | 11 ----------
 drivers/gpu/drm/amd/dal/include/irq_interface.h    | 10 ---------
 5 files changed, 3 insertions(+), 72 deletions(-)

diff --git a/drivers/gpu/drm/amd/dal/dc/gpio/ddc.c b/drivers/gpu/drm/amd/dal/dc/gpio/ddc.c
index 6eedef6..4aa8901 100644
--- a/drivers/gpu/drm/amd/dal/dc/gpio/ddc.c
+++ b/drivers/gpu/drm/amd/dal/dc/gpio/ddc.c
@@ -236,7 +236,7 @@ struct ddc *dal_gpio_create_ddc(
 		return NULL;
 	}
 
-	ddc->pin_data = dal_gpio_service_create_gpio_ex(
+	ddc->pin_data = dal_gpio_service_create_gpio(
 		service, GPIO_ID_DDC_DATA, en, GPIO_PIN_OUTPUT_STATE_DEFAULT);
 
 	if (!ddc->pin_data) {
@@ -244,7 +244,7 @@ struct ddc *dal_gpio_create_ddc(
 		goto failure_1;
 	}
 
-	ddc->pin_clock = dal_gpio_service_create_gpio_ex(
+	ddc->pin_clock = dal_gpio_service_create_gpio(
 		service, GPIO_ID_DDC_CLOCK, en, GPIO_PIN_OUTPUT_STATE_DEFAULT);
 
 	if (!ddc->pin_clock) {
diff --git a/drivers/gpu/drm/amd/dal/dc/gpio/gpio_service.c b/drivers/gpu/drm/amd/dal/dc/gpio/gpio_service.c
index c68f578..84e5666 100644
--- a/drivers/gpu/drm/amd/dal/dc/gpio/gpio_service.c
+++ b/drivers/gpu/drm/amd/dal/dc/gpio/gpio_service.c
@@ -150,23 +150,6 @@ failure_1:
 
 struct gpio *dal_gpio_service_create_gpio(
 	struct gpio_service *service,
-	uint32_t offset,
-	uint32_t mask,
-	enum gpio_pin_output_state output_state)
-{
-	enum gpio_id id;
-	uint32_t en;
-
-	if (!service->translate.funcs->offset_to_id(offset, mask, &id, &en)) {
-		BREAK_TO_DEBUGGER();
-		return NULL;
-	}
-
-	return dal_gpio_create(service, id, en, output_state);
-}
-
-struct gpio *dal_gpio_service_create_gpio_ex(
-	struct gpio_service *service,
 	enum gpio_id id,
 	uint32_t en,
 	enum gpio_pin_output_state output_state)
@@ -211,14 +194,6 @@ struct gpio *dal_gpio_service_create_irq(
 	return dal_gpio_create_irq(service, id, en);
 }
 
-struct gpio *dal_gpio_service_create_irq_ex(
-	struct gpio_service *service,
-	enum gpio_id id,
-	uint32_t en)
-{
-	return dal_gpio_create_irq(service, id, en);
-}
-
 void dal_gpio_service_destroy_irq(
 	struct gpio **irq)
 {
diff --git a/drivers/gpu/drm/amd/dal/dc/gpio/irq.c b/drivers/gpu/drm/amd/dal/dc/gpio/irq.c
index 708cfff..23bb75a 100644
--- a/drivers/gpu/drm/amd/dal/dc/gpio/irq.c
+++ b/drivers/gpu/drm/amd/dal/dc/gpio/irq.c
@@ -47,23 +47,6 @@
  * Post-requisites: headers required by this unit
  */
 
-/*
- * This unit
- */
-
-enum gpio_result dal_irq_open(
-	struct gpio *irq)
-{
-	return dal_gpio_open(irq, GPIO_MODE_INTERRUPT);
-}
-
-enum gpio_result dal_irq_get_value(
-	const struct gpio *irq,
-	uint32_t *value)
-{
-	return dal_gpio_get_value(irq, value);
-}
-
 enum dc_irq_source dal_irq_get_source(
 	const struct gpio *irq)
 {
@@ -110,12 +93,6 @@ enum gpio_result dal_irq_setup_hpd_filter(
 	return dal_gpio_set_config(irq, &config_data);
 }
 
-void dal_irq_close(
-	struct gpio *irq)
-{
-	dal_gpio_close(irq);
-}
-
 /*
  * @brief
  * Creation and destruction
@@ -137,7 +114,7 @@ struct gpio *dal_gpio_create_irq(
 		return NULL;
 	}
 
-	irq = dal_gpio_service_create_gpio_ex(
+	irq = dal_gpio_service_create_gpio(
 		service, id, en, GPIO_PIN_OUTPUT_STATE_DEFAULT);
 
 	if (irq)
diff --git a/drivers/gpu/drm/amd/dal/include/gpio_service_interface.h b/drivers/gpu/drm/amd/dal/include/gpio_service_interface.h
index 06e2294..9da9057 100644
--- a/drivers/gpu/drm/amd/dal/include/gpio_service_interface.h
+++ b/drivers/gpu/drm/amd/dal/include/gpio_service_interface.h
@@ -40,12 +40,6 @@ struct gpio_service *dal_gpio_service_create(
 
 struct gpio *dal_gpio_service_create_gpio(
 	struct gpio_service *service,
-	uint32_t offset,
-	uint32_t mask,
-	enum gpio_pin_output_state output_state);
-
-struct gpio *dal_gpio_service_create_gpio_ex(
-	struct gpio_service *service,
 	enum gpio_id id,
 	uint32_t en,
 	enum gpio_pin_output_state output_state);
@@ -67,11 +61,6 @@ struct gpio *dal_gpio_service_create_irq(
 	uint32_t offset,
 	uint32_t mask);
 
-struct gpio *dal_gpio_service_create_irq_ex(
-	struct gpio_service *service,
-	enum gpio_id id,
-	uint32_t en);
-
 void dal_gpio_service_destroy_irq(
 	struct gpio **ptr);
 
diff --git a/drivers/gpu/drm/amd/dal/include/irq_interface.h b/drivers/gpu/drm/amd/dal/include/irq_interface.h
index 94909d1..8619157 100644
--- a/drivers/gpu/drm/amd/dal/include/irq_interface.h
+++ b/drivers/gpu/drm/amd/dal/include/irq_interface.h
@@ -28,13 +28,6 @@
 
 #include "gpio_types.h"
 
-enum gpio_result dal_irq_open(
-	struct gpio *irq);
-
-enum gpio_result dal_irq_get_value(
-	const struct gpio *irq,
-	uint32_t *value);
-
 enum dc_irq_source dal_irq_get_source(
 	const struct gpio *irq);
 
@@ -45,7 +38,4 @@ enum gpio_result dal_irq_setup_hpd_filter(
 	struct gpio *irq,
 	struct gpio_hpd_config *config);
 
-void dal_irq_close(
-	struct gpio *irq);
-
 #endif
-- 
2.7.4

