From 0a83f55f43ac3e20283cfa9de8262505e3cb96dc Mon Sep 17 00:00:00 2001
From: Harry Wentland <harry.wentland@amd.com>
Date: Fri, 7 Oct 2016 11:21:17 -0400
Subject: [PATCH 1311/1722] drm/amd/dal: Remove config options for specific
 DCEs

Change-Id: I9f725f6a087e1676242eedaf15fb2f42da1353a8
Signed-off-by: Harry Wentland <harry.wentland@amd.com>
Acked-by: Harry Wentland <harry.wentland@amd.com>
---
 drivers/gpu/drm/amd/dal/amdgpu_dm/amdgpu_dm.c      |  4 ----
 .../gpu/drm/amd/dal/dc/adapter/adapter_service.c   | 24 ----------------------
 .../amd/dal/dc/asic_capability/asic_capability.c   | 16 ---------------
 .../gpu/drm/amd/dal/dc/bios/bios_parser_helper.c   |  8 --------
 .../gpu/drm/amd/dal/dc/bios/bios_parser_helper.h   |  6 ------
 .../gpu/drm/amd/dal/dc/bios/command_table_helper.c |  8 --------
 .../gpu/drm/amd/dal/dc/bios/command_table_helper.h |  6 ------
 drivers/gpu/drm/amd/dal/dc/core/dc_resource.c      | 24 ----------------------
 drivers/gpu/drm/amd/dal/dc/gpio/hw_factory.c       | 12 -----------
 drivers/gpu/drm/amd/dal/dc/gpio/hw_translate.c     | 13 ------------
 drivers/gpu/drm/amd/dal/dc/i2caux/i2caux.c         | 16 ---------------
 drivers/gpu/drm/amd/dal/dc/irq/irq_service.c       | 12 -----------
 drivers/gpu/drm/amd/dal/include/dal_asic_id.h      |  4 ----
 drivers/gpu/drm/amd/dal/include/dal_types.h        |  8 --------
 .../drm/amd/dal/include/display_clock_interface.h  |  6 ------
 15 files changed, 167 deletions(-)

diff --git a/drivers/gpu/drm/amd/dal/amdgpu_dm/amdgpu_dm.c b/drivers/gpu/drm/amd/dal/amdgpu_dm/amdgpu_dm.c
index 4006d63..d67e77a 100644
--- a/drivers/gpu/drm/amd/dal/amdgpu_dm/amdgpu_dm.c
+++ b/drivers/gpu/drm/amd/dal/amdgpu_dm/amdgpu_dm.c
@@ -1247,10 +1247,8 @@ int amdgpu_dm_initialize_drm_device(struct amdgpu_device *adev)
 	case CHIP_FIJI:
 	case CHIP_CARRIZO:
 	case CHIP_STONEY:
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 	case CHIP_POLARIS11:
 	case CHIP_POLARIS10:
-#endif
 		if (dce110_register_irq_handlers(dm->adev)) {
 			DRM_ERROR("DM: Failed to initialize IRQ\n");
 			return -1;
@@ -1557,7 +1555,6 @@ static int dm_early_init(void *handle)
 		if (adev->mode_info.funcs == NULL)
 			adev->mode_info.funcs = &dm_dce_v11_0_display_funcs;
 		break;
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 	case CHIP_POLARIS11:
 		adev->mode_info.num_crtc = 5;
 		adev->mode_info.num_hpd = 5;
@@ -1572,7 +1569,6 @@ static int dm_early_init(void *handle)
 		if (adev->mode_info.funcs == NULL)
 			adev->mode_info.funcs = &dm_dce_v11_0_display_funcs;
 		break;
-#endif
 	default:
 		DRM_ERROR("Usupported ASIC type: 0x%X\n", adev->asic_type);
 		return -EINVAL;
diff --git a/drivers/gpu/drm/amd/dal/dc/adapter/adapter_service.c b/drivers/gpu/drm/amd/dal/dc/adapter/adapter_service.c
index afd06a5..7cce615 100644
--- a/drivers/gpu/drm/amd/dal/dc/adapter/adapter_service.c
+++ b/drivers/gpu/drm/amd/dal/dc/adapter/adapter_service.c
@@ -41,17 +41,11 @@
 
 #include "atom.h"
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 #include "dce80/hw_ctx_adapter_service_dce80.h"
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 #include "dce110/hw_ctx_adapter_service_dce110.h"
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 #include "dce112/hw_ctx_adapter_service_dce112.h"
-#endif
 
 #include "diagnostics/hw_ctx_adapter_service_diag.h"
 
@@ -665,22 +659,14 @@ static struct hw_ctx_adapter_service *create_hw_ctx(
 		return dal_adapter_service_create_hw_ctx_diag(ctx);
 
 	switch (dce_version) {
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 	case DCE_VERSION_8_0:
 		return dal_adapter_service_create_hw_ctx_dce80(ctx);
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 	case DCE_VERSION_10_0:
 		return dal_adapter_service_create_hw_ctx_dce110(ctx);
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 	case DCE_VERSION_11_0:
 		return dal_adapter_service_create_hw_ctx_dce110(ctx);
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 	case DCE_VERSION_11_2:
 		return dal_adapter_service_create_hw_ctx_dce112(ctx);
-#endif
 	default:
 		ASSERT_CRITICAL(false);
 		return NULL;
@@ -738,7 +724,6 @@ static bool adapter_service_construct(
 		as->default_values[id] = feature_entry_table[i].default_value;
 	}
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 	if (dal_adapter_service_get_dce_version(as) == DCE_VERSION_11_0) {
 		uint32_t i;
 
@@ -752,7 +737,6 @@ static bool adapter_service_construct(
 				as->default_values[id] = true;
 		}
 	}
-#endif
 
 	/* Generate feature set table */
 	if (!generate_feature_set(as, init_data->display_param)) {
@@ -894,23 +878,15 @@ enum dce_version dal_adapter_service_get_dce_version(
 	uint32_t version = as->asic_cap->data[ASIC_DATA_DCE_VERSION];
 
 	switch (version) {
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 	case 0x80:
 		/* CI Bonaire */
 		return DCE_VERSION_8_0;
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 	case 0x100:
 		return DCE_VERSION_10_0;
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 	case 0x110:
 		return DCE_VERSION_11_0;
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 	case 0x112:
 		return DCE_VERSION_11_2;
-#endif
 	default:
 		ASSERT_CRITICAL(false);
 		return DCE_VERSION_UNKNOWN;
diff --git a/drivers/gpu/drm/amd/dal/dc/asic_capability/asic_capability.c b/drivers/gpu/drm/amd/dal/dc/asic_capability/asic_capability.c
index da8319c..540372b 100644
--- a/drivers/gpu/drm/amd/dal/dc/asic_capability/asic_capability.c
+++ b/drivers/gpu/drm/amd/dal/dc/asic_capability/asic_capability.c
@@ -32,21 +32,13 @@
 #include "include/dal_types.h"
 #include "include/dal_asic_id.h"
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 #include "hawaii_asic_capability.h"
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 #include "tonga_asic_capability.h"
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 #include "carrizo_asic_capability.h"
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 #include "polaris10_asic_capability.h"
-#endif
 
 /*
  * Initializes asic_capability instance.
@@ -94,38 +86,30 @@ static bool construct(
 
 	switch (init->chip_family) {
 	case FAMILY_CI:
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 		dal_hawaii_asic_capability_create(cap, init);
 		asic_supported = true;
-#endif
 		break;
 
 	case FAMILY_KV:
 		break;
 
 	case FAMILY_CZ:
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 		carrizo_asic_capability_create(cap, init);
 		asic_supported = true;
-#endif
 		break;
 
 	case FAMILY_VI:
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 		if (ASIC_REV_IS_TONGA_P(init->hw_internal_rev) ||
 				ASIC_REV_IS_FIJI_P(init->hw_internal_rev)) {
 			tonga_asic_capability_create(cap, init);
 			asic_supported = true;
 			break;
 		}
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 		if (ASIC_REV_IS_POLARIS10_P(init->hw_internal_rev) ||
 				ASIC_REV_IS_POLARIS11_M(init->hw_internal_rev)) {
 			polaris10_asic_capability_create(cap, init);
 			asic_supported = true;
 		}
-#endif
 		break;
 
 	default:
diff --git a/drivers/gpu/drm/amd/dal/dc/bios/bios_parser_helper.c b/drivers/gpu/drm/amd/dal/dc/bios/bios_parser_helper.c
index 26264f8..15d57ba 100644
--- a/drivers/gpu/drm/amd/dal/dc/bios/bios_parser_helper.c
+++ b/drivers/gpu/drm/amd/dal/dc/bios/bios_parser_helper.c
@@ -38,29 +38,21 @@ bool dal_bios_parser_init_bios_helper(
 	enum dce_version version)
 {
 	switch (version) {
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 	case DCE_VERSION_8_0:
 		bp->bios_helper = dal_bios_parser_helper_dce80_get_table();
 		return true;
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 	case DCE_VERSION_10_0:
 		bp->bios_helper = dal_bios_parser_helper_dce110_get_table();
 		return true;
 
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 	case DCE_VERSION_11_0:
 		bp->bios_helper = dal_bios_parser_helper_dce110_get_table();
 		return true;
 
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 	case DCE_VERSION_11_2:
 		bp->bios_helper = dal_bios_parser_helper_dce112_get_table();
 		return true;
 
-#endif
 	default:
 		BREAK_TO_DEBUGGER();
 		return false;
diff --git a/drivers/gpu/drm/amd/dal/dc/bios/bios_parser_helper.h b/drivers/gpu/drm/amd/dal/dc/bios/bios_parser_helper.h
index 1815acca..3b70a12 100644
--- a/drivers/gpu/drm/amd/dal/dc/bios/bios_parser_helper.h
+++ b/drivers/gpu/drm/amd/dal/dc/bios/bios_parser_helper.h
@@ -26,17 +26,11 @@
 #ifndef __DAL_BIOS_PARSER_HELPER_H__
 #define __DAL_BIOS_PARSER_HELPER_H__
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 #include "dce80/bios_parser_helper_dce80.h"
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0) || defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 #include "dce110/bios_parser_helper_dce110.h"
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 #include "dce112/bios_parser_helper_dce112.h"
-#endif
 
 struct bios_parser;
 
diff --git a/drivers/gpu/drm/amd/dal/dc/bios/command_table_helper.c b/drivers/gpu/drm/amd/dal/dc/bios/command_table_helper.c
index 1fe7f9b..32266e1 100644
--- a/drivers/gpu/drm/amd/dal/dc/bios/command_table_helper.c
+++ b/drivers/gpu/drm/amd/dal/dc/bios/command_table_helper.c
@@ -37,29 +37,21 @@ bool dal_bios_parser_init_cmd_tbl_helper(
 	enum dce_version dce)
 {
 	switch (dce) {
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 	case DCE_VERSION_8_0:
 		*h = dal_cmd_tbl_helper_dce80_get_table();
 		return true;
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 	case DCE_VERSION_10_0:
 		*h = dal_cmd_tbl_helper_dce110_get_table();
 		return true;
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 	case DCE_VERSION_11_0:
 		*h = dal_cmd_tbl_helper_dce110_get_table();
 		return true;
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 	case DCE_VERSION_11_2:
 		*h = dal_cmd_tbl_helper_dce112_get_table();
 		return true;
-#endif
 
 	default:
 		/* Unsupported DCE */
diff --git a/drivers/gpu/drm/amd/dal/dc/bios/command_table_helper.h b/drivers/gpu/drm/amd/dal/dc/bios/command_table_helper.h
index e6a0d19..1fab634 100644
--- a/drivers/gpu/drm/amd/dal/dc/bios/command_table_helper.h
+++ b/drivers/gpu/drm/amd/dal/dc/bios/command_table_helper.h
@@ -26,15 +26,9 @@
 #ifndef __DAL_COMMAND_TABLE_HELPER_H__
 #define __DAL_COMMAND_TABLE_HELPER_H__
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 #include "dce80/command_table_helper_dce80.h"
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0) || defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 #include "dce110/command_table_helper_dce110.h"
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 #include "dce112/command_table_helper_dce112.h"
-#endif
 
 struct command_table_helper {
 	bool (*controller_id_to_atom)(enum controller_id id, uint8_t *atom_id);
diff --git a/drivers/gpu/drm/amd/dal/dc/core/dc_resource.c b/drivers/gpu/drm/amd/dal/dc/core/dc_resource.c
index 82cac0a..0748d97 100644
--- a/drivers/gpu/drm/amd/dal/dc/core/dc_resource.c
+++ b/drivers/gpu/drm/amd/dal/dc/core/dc_resource.c
@@ -34,50 +34,34 @@
 #include "set_mode_types.h"
 #include "adapter_service_interface.h"
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 #include "dce80/dce80_resource.h"
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 #include "dce100/dce100_resource.h"
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 #include "dce110/dce110_resource.h"
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 #include "dce112/dce112_resource.h"
-#endif
 
 enum dce_version resource_parse_asic_id(struct hw_asic_id asic_id)
 {
 	enum dce_version dc_version = DCE_VERSION_UNKNOWN;
 	switch (asic_id.chip_family) {
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 	case FAMILY_CI:
 	case FAMILY_KV:
 		dc_version = DCE_VERSION_8_0;
 		break;
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 	case FAMILY_CZ:
 		dc_version = DCE_VERSION_11_0;
 		break;
-#endif
 
 	case FAMILY_VI:
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 		if (ASIC_REV_IS_TONGA_P(asic_id.hw_internal_rev) ||
 				ASIC_REV_IS_FIJI_P(asic_id.hw_internal_rev)) {
 			dc_version = DCE_VERSION_10_0;
 			break;
 		}
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 		if (ASIC_REV_IS_POLARIS10_P(asic_id.hw_internal_rev) ||
 				ASIC_REV_IS_POLARIS11_M(asic_id.hw_internal_rev)) {
 			dc_version = DCE_VERSION_11_2;
 		}
-#endif
 		break;
 	default:
 		dc_version = DCE_VERSION_UNKNOWN;
@@ -94,26 +78,18 @@ struct resource_pool *dc_create_resource_pool(struct adapter_service *adapter_se
 {
 
 	switch (dc_version) {
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 	case DCE_VERSION_8_0:
 		return dce80_create_resource_pool(
 			adapter_serv, num_virtual_links, dc);
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 	case DCE_VERSION_10_0:
 		return dce100_create_resource_pool(
 			adapter_serv, num_virtual_links, dc);
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 	case DCE_VERSION_11_0:
 		return dce110_create_resource_pool(
 			adapter_serv, num_virtual_links, dc, asic_id);
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 	case DCE_VERSION_11_2:
 		return dce112_create_resource_pool(
 			adapter_serv, num_virtual_links, dc);
-#endif
 	default:
 		break;
 	}
diff --git a/drivers/gpu/drm/amd/dal/dc/gpio/hw_factory.c b/drivers/gpu/drm/amd/dal/dc/gpio/hw_factory.c
index 5037a2d..f1a6fa7 100644
--- a/drivers/gpu/drm/amd/dal/dc/gpio/hw_factory.c
+++ b/drivers/gpu/drm/amd/dal/dc/gpio/hw_factory.c
@@ -40,13 +40,9 @@
  * Post-requisites: headers required by this unit
  */
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 #include "dce80/hw_factory_dce80.h"
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 #include "dce110/hw_factory_dce110.h"
-#endif
 
 #include "diagnostics/hw_factory_diag.h"
 
@@ -65,25 +61,17 @@ bool dal_hw_factory_init(
 	}
 
 	switch (dce_version) {
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 	case DCE_VERSION_8_0:
 		dal_hw_factory_dce80_init(factory);
 		return true;
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 	case DCE_VERSION_10_0:
 		dal_hw_factory_dce110_init(factory);
 		return true;
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 	case DCE_VERSION_11_0:
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 	case DCE_VERSION_11_2:
-#endif
 		dal_hw_factory_dce110_init(factory);
 		return true;
-#endif
 	default:
 		ASSERT_CRITICAL(false);
 		return false;
diff --git a/drivers/gpu/drm/amd/dal/dc/gpio/hw_translate.c b/drivers/gpu/drm/amd/dal/dc/gpio/hw_translate.c
index da56db7..23e097f 100644
--- a/drivers/gpu/drm/amd/dal/dc/gpio/hw_translate.c
+++ b/drivers/gpu/drm/amd/dal/dc/gpio/hw_translate.c
@@ -40,13 +40,8 @@
  * Post-requisites: headers required by this unit
  */
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 #include "dce80/hw_translate_dce80.h"
-#endif
-
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 #include "dce110/hw_translate_dce110.h"
-#endif
 
 #include "diagnostics/hw_translate_diag.h"
 
@@ -65,22 +60,14 @@ bool dal_hw_translate_init(
 	}
 
 	switch (dce_version) {
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 	case DCE_VERSION_8_0:
 		dal_hw_translate_dce80_init(translate);
 		return true;
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 	case DCE_VERSION_10_0:
-#endif
 	case DCE_VERSION_11_0:
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 	case DCE_VERSION_11_2:
-#endif
 		dal_hw_translate_dce110_init(translate);
 		return true;
-#endif
 	default:
 		BREAK_TO_DEBUGGER();
 		return false;
diff --git a/drivers/gpu/drm/amd/dal/dc/i2caux/i2caux.c b/drivers/gpu/drm/amd/dal/dc/i2caux/i2caux.c
index a754632..6c39423 100644
--- a/drivers/gpu/drm/amd/dal/dc/i2caux/i2caux.c
+++ b/drivers/gpu/drm/amd/dal/dc/i2caux/i2caux.c
@@ -48,21 +48,13 @@
  * This unit
  */
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 #include "dce80/i2caux_dce80.h"
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 #include "dce100/i2caux_dce100.h"
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 #include "dce110/i2caux_dce110.h"
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 #include "dce112/i2caux_dce112.h"
-#endif
 
 #include "diagnostics/i2caux_diag.h"
 
@@ -91,22 +83,14 @@ struct i2caux *dal_i2caux_create(
 	}
 
 	switch (dce_version) {
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 	case DCE_VERSION_8_0:
 		return dal_i2caux_dce80_create(as, ctx);
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 	case DCE_VERSION_11_2:
 		return dal_i2caux_dce112_create(as, ctx);
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 	case DCE_VERSION_11_0:
 		return dal_i2caux_dce110_create(as, ctx);
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 	case DCE_VERSION_10_0:
 		return dal_i2caux_dce100_create(as, ctx);
-#endif
 	default:
 		BREAK_TO_DEBUGGER();
 		return NULL;
diff --git a/drivers/gpu/drm/amd/dal/dc/irq/irq_service.c b/drivers/gpu/drm/amd/dal/dc/irq/irq_service.c
index 02a2b44..ddbea40 100644
--- a/drivers/gpu/drm/amd/dal/dc/irq/irq_service.c
+++ b/drivers/gpu/drm/amd/dal/dc/irq/irq_service.c
@@ -28,16 +28,12 @@
 #include "include/irq_service_interface.h"
 #include "include/logger_interface.h"
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 #include "dce110/irq_service_dce110.h"
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 	/*
 	 * TODO: implement DCE8.x IRQ service
 	 */
 #include "dce80/irq_service_dce80.h"
-#endif
 
 #include "irq_service.h"
 
@@ -57,22 +53,14 @@ struct irq_service *dal_irq_service_create(
 	struct irq_service_init_data *init_data)
 {
 	switch (version) {
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 	case DCE_VERSION_8_0:
 		return dal_irq_service_dce80_create(init_data);
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 	case DCE_VERSION_10_0:
 		return dal_irq_service_dce110_create(init_data);
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 	case DCE_VERSION_11_2:
 		return dal_irq_service_dce110_create(init_data);
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 	case DCE_VERSION_11_0:
 		return dal_irq_service_dce110_create(init_data);
-#endif
 	default:
 		return NULL;
 	}
diff --git a/drivers/gpu/drm/amd/dal/include/dal_asic_id.h b/drivers/gpu/drm/amd/dal/include/dal_asic_id.h
index 4cb6a9f..c9402c0 100644
--- a/drivers/gpu/drm/amd/dal/include/dal_asic_id.h
+++ b/drivers/gpu/drm/amd/dal/include/dal_asic_id.h
@@ -83,11 +83,9 @@
 #define VI_TONGA_P_A1 21
 #define VI_FIJI_P_A0 60
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 /* DCE112 */
 #define VI_POLARIS10_P_A0 80
 #define VI_POLARIS11_M_A0 90
-#endif
 
 #define VI_UNKNOWN 0xFF
 
@@ -96,11 +94,9 @@
 #define ASIC_REV_IS_FIJI_P(eChipRev) ((eChipRev >= VI_FIJI_P_A0) && \
 		(eChipRev < 80))
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 #define ASIC_REV_IS_POLARIS10_P(eChipRev) ((eChipRev >= VI_POLARIS10_P_A0) && \
 		(eChipRev < VI_POLARIS11_M_A0))
 #define ASIC_REV_IS_POLARIS11_M(eChipRev) (eChipRev >= VI_POLARIS11_M_A0)
-#endif
 
 /* DCE11 */
 #define CZ_CARRIZO_A0 0x01
diff --git a/drivers/gpu/drm/amd/dal/include/dal_types.h b/drivers/gpu/drm/amd/dal/include/dal_types.h
index 0e4c9a2..ada5b19 100644
--- a/drivers/gpu/drm/amd/dal/include/dal_types.h
+++ b/drivers/gpu/drm/amd/dal/include/dal_types.h
@@ -34,18 +34,10 @@ struct dc_bios;
 
 enum dce_version {
 	DCE_VERSION_UNKNOWN = (-1),
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 	DCE_VERSION_8_0,
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE10_0)
 	DCE_VERSION_10_0,
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 	DCE_VERSION_11_0,
-#endif
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 	DCE_VERSION_11_2,
-#endif
 	DCE_VERSION_MAX,
 };
 
diff --git a/drivers/gpu/drm/amd/dal/include/display_clock_interface.h b/drivers/gpu/drm/amd/dal/include/display_clock_interface.h
index 06c6715..5819676 100644
--- a/drivers/gpu/drm/amd/dal/include/display_clock_interface.h
+++ b/drivers/gpu/drm/amd/dal/include/display_clock_interface.h
@@ -117,23 +117,17 @@ struct display_clock_state {
 
 struct display_clock;
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_2)
 struct display_clock *dal_display_clock_dce112_create(
 	struct dc_context *ctx,
 	struct adapter_service *as);
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE11_0)
 struct display_clock *dal_display_clock_dce110_create(
 	struct dc_context *ctx,
 	struct adapter_service *as);
-#endif
 
-#if defined(CONFIG_DRM_AMD_DAL_DCE8_0)
 struct display_clock *dal_display_clock_dce80_create(
 	struct dc_context *ctx,
 	struct adapter_service *as);
-#endif
 
 void dal_display_clock_destroy(struct display_clock **to_destroy);
 bool dal_display_clock_validate(
-- 
2.7.4

