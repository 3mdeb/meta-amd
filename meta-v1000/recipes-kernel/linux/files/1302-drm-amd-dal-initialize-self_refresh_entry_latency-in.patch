From 7222bca47bbe2b7c02568dc0592b95aadf9b2c06 Mon Sep 17 00:00:00 2001
From: Dmytro Laktyushkin <Dmytro.Laktyushkin@amd.com>
Date: Wed, 12 Oct 2016 15:00:38 -0400
Subject: [PATCH 1302/1722] drm/amd/dal: initialize self_refresh_entry_latency
 in bandwidth calculations

Change-Id: Ic050500d60ffe6e784a6922dd2fa2b088bc9ff52
Signed-off-by: Dmytro Laktyushkin <Dmytro.Laktyushkin@amd.com>
Acked-by: Harry Wentland <harry.wentland@amd.com>
---
 drivers/gpu/drm/amd/dal/dc/calcs/bandwidth_calcs.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/drivers/gpu/drm/amd/dal/dc/calcs/bandwidth_calcs.c b/drivers/gpu/drm/amd/dal/dc/calcs/bandwidth_calcs.c
index c1fea6f..331fd27 100644
--- a/drivers/gpu/drm/amd/dal/dc/calcs/bandwidth_calcs.c
+++ b/drivers/gpu/drm/amd/dal/dc/calcs/bandwidth_calcs.c
@@ -1988,6 +1988,7 @@ void bw_calcs_init(struct bw_calcs_dceip *bw_dceip,
 		vbios.trc = bw_int_to_fixed(50);
 		vbios.dmifmc_urgent_latency = bw_int_to_fixed(4);
 		vbios.stutter_self_refresh_exit_latency = bw_frc_to_fixed(153, 10);
+		vbios.stutter_self_refresh_entry_latency = bw_int_to_fixed(0);
 		vbios.nbp_state_change_latency = bw_frc_to_fixed(19649, 1000);
 		vbios.mcifwrmc_urgent_latency = bw_int_to_fixed(10);
 		vbios.scatter_gather_enable = true;
@@ -2097,6 +2098,7 @@ void bw_calcs_init(struct bw_calcs_dceip *bw_dceip,
 		vbios.trc = bw_int_to_fixed(48);
 		vbios.dmifmc_urgent_latency = bw_int_to_fixed(3);
 		vbios.stutter_self_refresh_exit_latency = bw_int_to_fixed(5);
+		vbios.stutter_self_refresh_entry_latency = bw_int_to_fixed(0);
 		vbios.nbp_state_change_latency = bw_int_to_fixed(45);
 		vbios.mcifwrmc_urgent_latency = bw_int_to_fixed(10);
 		vbios.scatter_gather_enable = true;
@@ -2206,6 +2208,7 @@ void bw_calcs_init(struct bw_calcs_dceip *bw_dceip,
 		vbios.trc = bw_int_to_fixed(48);
 		vbios.dmifmc_urgent_latency = bw_int_to_fixed(3);
 		vbios.stutter_self_refresh_exit_latency = bw_int_to_fixed(5);
+		vbios.stutter_self_refresh_entry_latency = bw_int_to_fixed(0);
 		vbios.nbp_state_change_latency = bw_int_to_fixed(45);
 		vbios.mcifwrmc_urgent_latency = bw_int_to_fixed(10);
 		vbios.scatter_gather_enable = true;
-- 
2.7.4

