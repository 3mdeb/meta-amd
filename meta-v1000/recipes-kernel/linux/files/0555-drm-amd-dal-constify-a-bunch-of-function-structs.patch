From b8452ed4f69bacbbf6d589e2c49dc95951a0e41c Mon Sep 17 00:00:00 2001
From: Dave Airlie <airlied@redhat.com>
Date: Tue, 12 Apr 2016 12:15:54 +1000
Subject: [PATCH 0555/1722] drm/amd/dal: constify a bunch of function structs.

These are all much better being constant.

Signed-off-by: Dave Airlie <airlied@redhat.com>
Acked-by: Harry Wentland <harry.wentland@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Kalyan Alle <kalyan.alle@amd.com>
---
 drivers/gpu/drm/amd/dal/dc/dce100/dce100_link_encoder.c       | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce110/dce110_link_encoder.c       | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce110/dce110_stream_encoder.c     | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce110/dce110_timing_generator.c   | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce110/dce110_timing_generator_v.c | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce112/dce112_link_encoder.c       | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce80/dce80_link_encoder.c         | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce80/dce80_stream_encoder.c       | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce80/dce80_timing_generator.c     | 2 +-
 drivers/gpu/drm/amd/dal/dc/inc/hw/link_encoder.h              | 2 +-
 drivers/gpu/drm/amd/dal/dc/inc/hw/stream_encoder.h            | 2 +-
 drivers/gpu/drm/amd/dal/dc/inc/hw/timing_generator.h          | 2 +-
 drivers/gpu/drm/amd/dal/dc/virtual/virtual_link_encoder.c     | 2 +-
 drivers/gpu/drm/amd/dal/dc/virtual/virtual_stream_encoder.c   | 2 +-
 14 files changed, 14 insertions(+), 14 deletions(-)

diff --git a/drivers/gpu/drm/amd/dal/dc/dce100/dce100_link_encoder.c b/drivers/gpu/drm/amd/dal/dc/dce100/dce100_link_encoder.c
index 5f294ee..70d6755 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce100/dce100_link_encoder.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce100/dce100_link_encoder.c
@@ -41,7 +41,7 @@
 #define DCE10_UNIPHY_MAX_PIXEL_CLK_IN_KHZ 300000
 
 
-static struct link_encoder_funcs dce100_lnk_enc_funcs = {
+static const struct link_encoder_funcs dce100_lnk_enc_funcs = {
 	.validate_output_with_stream =
 		dce110_link_encoder_validate_output_with_stream,
 	.hw_init = dce110_link_encoder_hw_init,
diff --git a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_link_encoder.c b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_link_encoder.c
index 7a91259..34f0517 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_link_encoder.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_link_encoder.c
@@ -89,7 +89,7 @@ enum {
 #define DP_REG(reg)\
 	(reg + enc110->offsets.dp)
 
-static struct link_encoder_funcs dce110_lnk_enc_funcs = {
+static const struct link_encoder_funcs dce110_lnk_enc_funcs = {
 	.validate_output_with_stream =
 		dce110_link_encoder_validate_output_with_stream,
 	.hw_init = dce110_link_encoder_hw_init,
diff --git a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_stream_encoder.c b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_stream_encoder.c
index 4c75425a..d92bebc 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_stream_encoder.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_stream_encoder.c
@@ -1069,7 +1069,7 @@ static void dce110_stream_encoder_dp_unblank(
 	dm_write_reg(ctx, addr, value);
 }
 
-static struct stream_encoder_funcs dce110_str_enc_funcs = {
+static const struct stream_encoder_funcs dce110_str_enc_funcs = {
 	.dp_set_stream_attribute =
 		dce110_stream_encoder_dp_set_stream_attribute,
 	.hdmi_set_stream_attribute =
diff --git a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_timing_generator.c b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_timing_generator.c
index 643ed9a..2fb96ac3 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_timing_generator.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_timing_generator.c
@@ -122,7 +122,7 @@ enum trigger_polarity_select {
 
 /******************************************************************************/
 
-static struct timing_generator_funcs dce110_tg_funcs = {
+static const struct timing_generator_funcs dce110_tg_funcs = {
 		.validate_timing = dce110_tg_validate_timing,
 		.program_timing = dce110_tg_program_timing,
 		.enable_crtc = dce110_timing_generator_enable_crtc,
diff --git a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_timing_generator_v.c b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_timing_generator_v.c
index fcd2b58..c91b5b44 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_timing_generator_v.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_timing_generator_v.c
@@ -688,7 +688,7 @@ static void dce110_timing_generator_v_disable_vga(
  * DCE11 Timing Generator Constructor / Destructor
  *
  *********************************************************************************************/
-static struct timing_generator_funcs dce110_tg_v_funcs = {
+static const struct timing_generator_funcs dce110_tg_v_funcs = {
 		.validate_timing = dce110_tg_validate_timing,
 		.program_timing = dce110_timing_generator_v_program_timing,
 		.enable_crtc = dce110_timing_generator_v_enable_crtc,
diff --git a/drivers/gpu/drm/amd/dal/dc/dce112/dce112_link_encoder.c b/drivers/gpu/drm/amd/dal/dc/dce112/dce112_link_encoder.c
index caf8913..915f06f 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce112/dce112_link_encoder.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce112/dce112_link_encoder.c
@@ -142,7 +142,7 @@ bool dce112_link_encoder_validate_output_with_stream(
 	return is_valid;
 }
 
-static struct link_encoder_funcs dce112_lnk_enc_funcs = {
+static const struct link_encoder_funcs dce112_lnk_enc_funcs = {
 	.validate_output_with_stream =
 		dce112_link_encoder_validate_output_with_stream,
 	.hw_init = dce110_link_encoder_hw_init,
diff --git a/drivers/gpu/drm/amd/dal/dc/dce80/dce80_link_encoder.c b/drivers/gpu/drm/amd/dal/dc/dce80/dce80_link_encoder.c
index 486378e..b65257e 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce80/dce80_link_encoder.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce80/dce80_link_encoder.c
@@ -193,7 +193,7 @@ static void dce80_link_encoder_enable_dp_output(
 	}
 }
 
-static struct link_encoder_funcs dce80_lnk_enc_funcs = {
+static const struct link_encoder_funcs dce80_lnk_enc_funcs = {
 	.validate_output_with_stream =
 		dce110_link_encoder_validate_output_with_stream,
 	.hw_init = dce110_link_encoder_hw_init,
diff --git a/drivers/gpu/drm/amd/dal/dc/dce80/dce80_stream_encoder.c b/drivers/gpu/drm/amd/dal/dc/dce80/dce80_stream_encoder.c
index ed55459..0ee9293 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce80/dce80_stream_encoder.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce80/dce80_stream_encoder.c
@@ -1051,7 +1051,7 @@ static void dce80_stream_encoder_dp_unblank(
 	dm_write_reg(ctx, addr, value);
 }
 
-static struct stream_encoder_funcs dce80_str_enc_funcs = {
+static const struct stream_encoder_funcs dce80_str_enc_funcs = {
 	.dp_set_stream_attribute =
 		dce80_stream_encoder_dp_set_stream_attribute,
 	.hdmi_set_stream_attribute =
diff --git a/drivers/gpu/drm/amd/dal/dc/dce80/dce80_timing_generator.c b/drivers/gpu/drm/amd/dal/dc/dce80/dce80_timing_generator.c
index e44e131..8c20e6c 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce80/dce80_timing_generator.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce80/dce80_timing_generator.c
@@ -116,7 +116,7 @@ static void program_timing(struct timing_generator *tg,
 	dce110_tg_program_timing(tg, timing, use_vbios);
 }
 
-static struct timing_generator_funcs dce80_tg_funcs = {
+static const struct timing_generator_funcs dce80_tg_funcs = {
 		.validate_timing = dce110_tg_validate_timing,
 		.program_timing = program_timing,
 		.enable_crtc = dce110_timing_generator_enable_crtc,
diff --git a/drivers/gpu/drm/amd/dal/dc/inc/hw/link_encoder.h b/drivers/gpu/drm/amd/dal/dc/inc/hw/link_encoder.h
index 94dd422..6db68b9 100644
--- a/drivers/gpu/drm/amd/dal/dc/inc/hw/link_encoder.h
+++ b/drivers/gpu/drm/amd/dal/dc/inc/hw/link_encoder.h
@@ -67,7 +67,7 @@ struct encoder_feature_support {
 };
 
 struct link_encoder {
-	struct link_encoder_funcs *funcs;
+	const struct link_encoder_funcs *funcs;
 	struct adapter_service *adapter_service;
 	int32_t aux_channel_offset;
 	struct dc_context *ctx;
diff --git a/drivers/gpu/drm/amd/dal/dc/inc/hw/stream_encoder.h b/drivers/gpu/drm/amd/dal/dc/inc/hw/stream_encoder.h
index 4124399..a31dcc9 100644
--- a/drivers/gpu/drm/amd/dal/dc/inc/hw/stream_encoder.h
+++ b/drivers/gpu/drm/amd/dal/dc/inc/hw/stream_encoder.h
@@ -45,7 +45,7 @@ struct encoder_set_dp_phy_pattern_param {
 };
 
 struct stream_encoder {
-	struct stream_encoder_funcs *funcs;
+	const struct stream_encoder_funcs *funcs;
 	struct dc_context *ctx;
 	struct dc_bios *bp;
 	enum engine_id id;
diff --git a/drivers/gpu/drm/amd/dal/dc/inc/hw/timing_generator.h b/drivers/gpu/drm/amd/dal/dc/inc/hw/timing_generator.h
index 770e3d3..492804e 100644
--- a/drivers/gpu/drm/amd/dal/dc/inc/hw/timing_generator.h
+++ b/drivers/gpu/drm/amd/dal/dc/inc/hw/timing_generator.h
@@ -104,7 +104,7 @@ enum crtc_state {
 };
 
 struct timing_generator {
-	struct timing_generator_funcs *funcs;
+	const struct timing_generator_funcs *funcs;
 	struct dc_bios *bp;
 	struct dc_context *ctx;
 };
diff --git a/drivers/gpu/drm/amd/dal/dc/virtual/virtual_link_encoder.c b/drivers/gpu/drm/amd/dal/dc/virtual/virtual_link_encoder.c
index 66e1fcf..68ad503 100644
--- a/drivers/gpu/drm/amd/dal/dc/virtual/virtual_link_encoder.c
+++ b/drivers/gpu/drm/amd/dal/dc/virtual/virtual_link_encoder.c
@@ -98,7 +98,7 @@ static void virtual_link_encoder_destroy(struct link_encoder **enc)
 }
 
 
-static struct link_encoder_funcs virtual_lnk_enc_funcs = {
+static const struct link_encoder_funcs virtual_lnk_enc_funcs = {
 	.validate_output_with_stream =
 		virtual_link_encoder_validate_output_with_stream,
 	.hw_init = virtual_link_encoder_hw_init,
diff --git a/drivers/gpu/drm/amd/dal/dc/virtual/virtual_stream_encoder.c b/drivers/gpu/drm/amd/dal/dc/virtual/virtual_stream_encoder.c
index 4a77c2c..f04ba2a 100644
--- a/drivers/gpu/drm/amd/dal/dc/virtual/virtual_stream_encoder.c
+++ b/drivers/gpu/drm/amd/dal/dc/virtual/virtual_stream_encoder.c
@@ -66,7 +66,7 @@ static void virtual_stream_encoder_dp_unblank(
 	struct stream_encoder *enc,
 	const struct encoder_unblank_param *param) {}
 
-static struct stream_encoder_funcs virtual_str_enc_funcs = {
+static const struct stream_encoder_funcs virtual_str_enc_funcs = {
 	.dp_set_stream_attribute =
 		virtual_stream_encoder_dp_set_stream_attribute,
 	.hdmi_set_stream_attribute =
-- 
2.7.4

