From 6cd5c5aff2d68bda0dcd2d94a1151a2dbcec0071 Mon Sep 17 00:00:00 2001
From: Zeyu Fan <Zeyu.Fan@amd.com>
Date: Fri, 14 Oct 2016 14:59:42 -0400
Subject: [PATCH 1327/1722] drm/amd/dal: Suppress linux build warning for irq
 change.

Change-Id: I24ff522e885b8aed0f9909aba4c9afb9768b3a4e
Signed-off-by: Zeyu Fan <Zeyu.Fan@amd.com>
Acked-by: Harry Wentland <harry.wentland@amd.com>
---
 drivers/gpu/drm/amd/dal/dc/dce100/dce100_resource.c | 14 +++++++-------
 drivers/gpu/drm/amd/dal/dc/dce110/dce110_resource.c | 13 +++++++------
 drivers/gpu/drm/amd/dal/dc/dce112/dce112_resource.c | 13 +++++++------
 drivers/gpu/drm/amd/dal/dc/dce80/dce80_resource.c   | 13 +++++++------
 4 files changed, 28 insertions(+), 25 deletions(-)

diff --git a/drivers/gpu/drm/amd/dal/dc/dce100/dce100_resource.c b/drivers/gpu/drm/amd/dal/dc/dce100/dce100_resource.c
index 8328563..2e2e31d 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce100/dce100_resource.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce100/dce100_resource.c
@@ -866,13 +866,13 @@ static bool construct(
 		dal_display_clock_store_max_clocks_state(
 				pool->base.display_clock, max_clocks_state);
 	}
-
-	struct irq_service_init_data init_data;
-	init_data.ctx = dc->ctx;
-	pool->base.irqs = dal_irq_service_dce110_create(&init_data);
-	if (!pool->base.irqs)
-		goto irqs_create_fail;
-
+	{
+		struct irq_service_init_data init_data;
+		init_data.ctx = dc->ctx;
+		pool->base.irqs = dal_irq_service_dce110_create(&init_data);
+		if (!pool->base.irqs)
+			goto irqs_create_fail;
+	}
 
 	/*************************************************
 	*  Resource + asic cap harcoding                *
diff --git a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_resource.c b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_resource.c
index 5fdce4a..8be64af 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_resource.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_resource.c
@@ -1182,12 +1182,13 @@ static bool construct(
 				pool->base.display_clock, max_clocks_state);
 	}
 
-	struct irq_service_init_data init_data;
-	init_data.ctx = dc->ctx;
-	pool->base.irqs = dal_irq_service_dce110_create(&init_data);
-	if (!pool->base.irqs)
-		goto irqs_create_fail;
-
+	{
+		struct irq_service_init_data init_data;
+		init_data.ctx = dc->ctx;
+		pool->base.irqs = dal_irq_service_dce110_create(&init_data);
+		if (!pool->base.irqs)
+			goto irqs_create_fail;
+	}
 
 	pool->base.scaler_filter = dal_scaler_filter_create(ctx);
 	if (pool->base.scaler_filter == NULL) {
diff --git a/drivers/gpu/drm/amd/dal/dc/dce112/dce112_resource.c b/drivers/gpu/drm/amd/dal/dc/dce112/dce112_resource.c
index d3fd7a5..8c52975 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce112/dce112_resource.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce112/dce112_resource.c
@@ -1162,12 +1162,13 @@ static bool construct(
 				pool->base.display_clock, max_clocks_state);
 	}
 
-	struct irq_service_init_data init_data;
-	init_data.ctx = dc->ctx;
-	pool->base.irqs = dal_irq_service_dce110_create(&init_data);
-	if (!pool->base.irqs)
-		goto irqs_create_fail;
-
+	{
+		struct irq_service_init_data init_data;
+		init_data.ctx = dc->ctx;
+		pool->base.irqs = dal_irq_service_dce110_create(&init_data);
+		if (!pool->base.irqs)
+			goto irqs_create_fail;
+	}
 
 	pool->base.scaler_filter = dal_scaler_filter_create(ctx);
 	if (pool->base.scaler_filter == NULL) {
diff --git a/drivers/gpu/drm/amd/dal/dc/dce80/dce80_resource.c b/drivers/gpu/drm/amd/dal/dc/dce80/dce80_resource.c
index 9c8ba45..a3c9b38 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce80/dce80_resource.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce80/dce80_resource.c
@@ -864,12 +864,13 @@ static bool construct(
 				pool->base.display_clock, max_clocks_state);
 	}
 
-	struct irq_service_init_data init_data;
-	init_data.ctx = dc->ctx;
-	pool->base.irqs = dal_irq_service_dce80_create(&init_data);
-	if (!pool->base.irqs)
-		goto irqs_create_fail;
-
+	{
+		struct irq_service_init_data init_data;
+		init_data.ctx = dc->ctx;
+		pool->base.irqs = dal_irq_service_dce80_create(&init_data);
+		if (!pool->base.irqs)
+			goto irqs_create_fail;
+	}
 
 	pool->base.scaler_filter = dal_scaler_filter_create(ctx);
 	if (pool->base.scaler_filter == NULL) {
-- 
2.7.4

