From 708bde947dc27777be94e225973a32601ea5e86a Mon Sep 17 00:00:00 2001
From: Harry Wentland <harry.wentland@amd.com>
Date: Fri, 21 Oct 2016 17:01:03 -0400
Subject: [PATCH 1403/1722] drm/amd/dal: Fix gpio regression with hotplug on DP

Change-Id: I2528005598d889583ca6feca529fdd6e0539a0a2
Signed-off-by: Harry Wentland <harry.wentland@amd.com>
Acked-by: Harry Wentland <harry.wentland@amd.com>
---
 drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.c | 7 +------
 1 file changed, 1 insertion(+), 6 deletions(-)

diff --git a/drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.c b/drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.c
index 3f54cd9..e02843d 100644
--- a/drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.c
+++ b/drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.c
@@ -173,12 +173,7 @@ static enum gpio_result set_config(
 	case GPIO_DDC_CONFIG_TYPE_MODE_AUX:
 		/* set the AUX pad mode */
 		if (!aux_pad_mode) {
-			set_reg_field_value_ex(
-				regval,
-				1,
-				FN(,AUX_PAD1_MODE));
-
-			REG_WRITE(gpio.MASK_reg, regval);
+			REG_UPDATE(gpio.MASK_reg, AUX_PAD1_MODE, 1);
 		}
 
 		return GPIO_RESULT_OK;
-- 
2.7.4

