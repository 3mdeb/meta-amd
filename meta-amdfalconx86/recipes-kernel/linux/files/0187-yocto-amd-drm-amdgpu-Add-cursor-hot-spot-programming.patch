From 813f148f80572c5e8210045ba100120e3c7a977a Mon Sep 17 00:00:00 2001
From: Mohammad Mohammadnia <Mohammad.Mohammadnia@amd.com>
Date: Thu, 25 Jun 2015 15:07:28 -0400
Subject: [PATCH 304/401] drm/amdgpu: Add cursor hot-spot programming

Cursor hot-spot programming is needed when display is rotated.

Reviewed-by: Harry Wentland <harry.wentland@amd.com>
Signed-off-by: Mohammad Mohammadnia <Mohammad.Mohammadnia@amd.com>
Signed-off-by: Sanjay R Mehta <sanju.mehta@amd.com>
---
 drivers/gpu/drm/amd/amdgpu/amdgpu_dm_types.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_dm_types.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_dm_types.c
index 00e960e..099816a 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_dm_types.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_dm_types.c
@@ -171,12 +171,12 @@ static int dm_crtc_cursor_set(struct drm_crtc *crtc,
 	int ret;
 	struct cursor_position position;
 
-
 	if (!handle) {
 		/* turn off cursor */
 		position.enable = false;
 		position.x = 0;
 		position.y = 0;
+		position.hot_spot_enable = false;
 		dal_set_cursor_position(adev->dm.dal, amdgpu_crtc->crtc_id, &position);
 
 		obj = NULL;
@@ -238,6 +238,10 @@ static int dm_crtc_cursor_move(struct drm_crtc *crtc,
 	position.x = x;
 	position.y = y;
 
+	position.hot_spot_enable = true;
+	position.x_origin = xorigin;
+	position.y_origin = yorigin;
+
 	dal_set_cursor_position(adev->dm.dal, amdgpu_crtc->crtc_id, &position);
 
 	return 0;
-- 
1.9.1

