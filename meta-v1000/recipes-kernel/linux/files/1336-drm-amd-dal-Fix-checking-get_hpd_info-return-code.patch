From 16d4192af7ef1a7b75bc783aff2325f9c43d1bc7 Mon Sep 17 00:00:00 2001
From: Harry Wentland <harry.wentland@amd.com>
Date: Mon, 17 Oct 2016 11:39:02 -0400
Subject: [PATCH 1336/1722] drm/amd/dal: Fix checking get_hpd_info return code

Change-Id: Iac9033f151e9e9c825d55053d754d887ea244844
Signed-off-by: Harry Wentland <harry.wentland@amd.com>
Acked-by: Harry Wentland <harry.wentland@amd.com>
---
 drivers/gpu/drm/amd/dal/dc/core/dc_link.c               | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce110/dce110_link_encoder.c | 2 +-
 2 files changed, 2 insertions(+), 2 deletions(-)

diff --git a/drivers/gpu/drm/amd/dal/dc/core/dc_link.c b/drivers/gpu/drm/amd/dal/dc/core/dc_link.c
index 98e033b..a323229 100644
--- a/drivers/gpu/drm/amd/dal/dc/core/dc_link.c
+++ b/drivers/gpu/drm/amd/dal/dc/core/dc_link.c
@@ -98,7 +98,7 @@ static struct gpio *get_hpd_gpio(const struct core_link *link)
 	struct graphics_object_hpd_info hpd_info;
 	struct gpio_pin_info pin_info;
 
-	if (!dcb->funcs->get_hpd_info(dcb, link->link_id, &hpd_info))
+	if (dcb->funcs->get_hpd_info(dcb, link->link_id, &hpd_info) != BP_RESULT_OK)
 		return NULL;
 
 	bp_result = dcb->funcs->get_gpio_pin_info(dcb,
diff --git a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_link_encoder.c b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_link_encoder.c
index 3fc3fac..0617d28 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_link_encoder.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_link_encoder.c
@@ -556,7 +556,7 @@ static struct gpio *get_hpd_gpio(const struct link_encoder *enc)
 	struct graphics_object_hpd_info hpd_info;
 	struct gpio_pin_info pin_info;
 
-	if (!dcb->funcs->get_hpd_info(dcb, enc->connector, &hpd_info))
+	if (dcb->funcs->get_hpd_info(dcb, enc->connector, &hpd_info) != BP_RESULT_OK)
 		return NULL;
 
 	bp_result = dcb->funcs->get_gpio_pin_info(dcb,
-- 
2.7.4

