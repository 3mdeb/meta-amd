From f94ff031b85e9d737db1696df9b2eda5339222b4 Mon Sep 17 00:00:00 2001
From: Dave Airlie <airlied@redhat.com>
Date: Tue, 12 Apr 2016 12:31:23 +1000
Subject: [PATCH 0558/1722] drm/amd/dal: constify resource/clock source funcs.

Signed-off-by: Dave Airlie <airlied@redhat.com>
Acked-by: Harry Wentland <harry.wentland@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Kalyan Alle <kalyan.alle@amd.com>
---
 drivers/gpu/drm/amd/dal/dc/dce100/dce100_resource.c     | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce110/dce110_clock_source.c | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce110/dce110_resource.c     | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce112/dce112_clock_source.c | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce112/dce112_resource.c     | 2 +-
 drivers/gpu/drm/amd/dal/dc/dce80/dce80_resource.c       | 2 +-
 drivers/gpu/drm/amd/dal/dc/inc/clock_source.h           | 2 +-
 drivers/gpu/drm/amd/dal/dc/inc/core_types.h             | 2 +-
 8 files changed, 8 insertions(+), 8 deletions(-)

diff --git a/drivers/gpu/drm/amd/dal/dc/dce100/dce100_resource.c b/drivers/gpu/drm/amd/dal/dc/dce100/dce100_resource.c
index 2b768cc..d414f1f 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce100/dce100_resource.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce100/dce100_resource.c
@@ -724,7 +724,7 @@ enum dc_status dce100_validate_guaranteed(
 	return result;
 }
 
-static struct resource_funcs dce100_res_pool_funcs = {
+static const struct resource_funcs dce100_res_pool_funcs = {ce100_res_pool_funcs = {
 	.destruct = dce100_destruct_resource_pool,
 	.link_enc_create = dce100_link_encoder_create,
 	.validate_with_context = dce100_validate_with_context,
diff --git a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_clock_source.c b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_clock_source.c
index 1690319..5e315ba 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_clock_source.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_clock_source.c
@@ -815,7 +815,7 @@ static bool dce110_clock_source_power_down(
 /*****************************************/
 /* Constructor                           */
 /*****************************************/
-static struct clock_source_funcs dce110_clk_src_funcs = {
+static const struct clock_source_funcs dce110_clk_src_funcs = {
 	.cs_power_down = dce110_clock_source_power_down,
 	.program_pix_clk = dce110_program_pix_clk,
 	.get_pix_clk_dividers = dce110_get_pix_clk_dividers
diff --git a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_resource.c b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_resource.c
index ec1fc37..63ec98a 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce110/dce110_resource.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce110/dce110_resource.c
@@ -931,7 +931,7 @@ enum dc_status dce110_validate_guaranteed(
 	return result;
 }
 
-static struct resource_funcs dce110_res_pool_funcs = {
+static const struct resource_funcs dce110_res_pool_funcs = {
 	.destruct = dce110_destruct_resource_pool,
 	.link_enc_create = dce110_link_encoder_create,
 	.validate_with_context = dce110_validate_with_context,
diff --git a/drivers/gpu/drm/amd/dal/dc/dce112/dce112_clock_source.c b/drivers/gpu/drm/amd/dal/dc/dce112/dce112_clock_source.c
index 91716a8..5cb7c21 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce112/dce112_clock_source.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce112/dce112_clock_source.c
@@ -243,7 +243,7 @@ static bool dce112_clock_source_power_down(
 /*****************************************/
 /* Constructor                           */
 /*****************************************/
-static struct clock_source_funcs dce112_clk_src_funcs = {
+static const struct clock_source_funcs dce112_clk_src_funcs = {
 	.cs_power_down = dce112_clock_source_power_down,
 	.program_pix_clk = dce112_program_pix_clk,
 	.get_pix_clk_dividers = dce112_get_pix_clk_dividers
diff --git a/drivers/gpu/drm/amd/dal/dc/dce112/dce112_resource.c b/drivers/gpu/drm/amd/dal/dc/dce112/dce112_resource.c
index 1431d86..e90c4e6 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce112/dce112_resource.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce112/dce112_resource.c
@@ -987,7 +987,7 @@ enum dc_status dce112_validate_guaranteed(
 	return result;
 }
 
-static struct resource_funcs dce112_res_pool_funcs = {
+static const struct resource_funcs dce112_res_pool_funcs = {
 	.destruct = dce112_destruct_resource_pool,
 	.link_enc_create = dce112_link_encoder_create,
 	.validate_with_context = dce112_validate_with_context,
diff --git a/drivers/gpu/drm/amd/dal/dc/dce80/dce80_resource.c b/drivers/gpu/drm/amd/dal/dc/dce80/dce80_resource.c
index 055e6e1..a7d4604 100644
--- a/drivers/gpu/drm/amd/dal/dc/dce80/dce80_resource.c
+++ b/drivers/gpu/drm/amd/dal/dc/dce80/dce80_resource.c
@@ -678,7 +678,7 @@ enum dc_status dce80_validate_guaranteed(
 	return result;
 }
 
-static struct resource_funcs dce80_res_pool_funcs = {
+static const struct resource_funcs dce80_res_pool_funcs = {
 	.destruct = dce80_destruct_resource_pool,
 	.link_enc_create = dce80_link_encoder_create,
 	.validate_with_context = dce80_validate_with_context,
diff --git a/drivers/gpu/drm/amd/dal/dc/inc/clock_source.h b/drivers/gpu/drm/amd/dal/dc/inc/clock_source.h
index 57743cc..d67d5ce 100644
--- a/drivers/gpu/drm/amd/dal/dc/inc/clock_source.h
+++ b/drivers/gpu/drm/amd/dal/dc/inc/clock_source.h
@@ -169,7 +169,7 @@ struct clock_source_funcs {
 };
 
 struct clock_source {
-	struct clock_source_funcs *funcs;
+	const struct clock_source_funcs *funcs;
 	struct dc_context *ctx;
 	enum clock_source_id id;
 };
diff --git a/drivers/gpu/drm/amd/dal/dc/inc/core_types.h b/drivers/gpu/drm/amd/dal/dc/inc/core_types.h
index 830b56e2..db93d14 100644
--- a/drivers/gpu/drm/amd/dal/dc/inc/core_types.h
+++ b/drivers/gpu/drm/amd/dal/dc/inc/core_types.h
@@ -269,7 +269,7 @@ struct resource_pool {
 	struct adapter_service *adapter_srv;
 	struct irq_service *irqs;
 
-	struct resource_funcs *funcs;
+	const struct resource_funcs *funcs;
 };
 
 struct pipe_ctx {
-- 
2.7.4

