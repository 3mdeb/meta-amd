From 08ce7c008febee110cad60ac6ce327ef4136f081 Mon Sep 17 00:00:00 2001
From: Mykola Lysenko <mykola.lysenko@amd.com>
Date: Mon, 8 Jun 2015 08:38:04 -0400
Subject: [PATCH 278/401] amd/dal: changed in timing list query interface to
 make it useful in DM

Signed-off-by: Harry Wentland <harry.wentland@amd.com>
Reviewed-by: Yeh, Eagle <Eagle.Yeh@amd.com>
Reviewed-by: Rokhvarg, David <David.Rokhvarg@amd.com>
Signed-off-by: Sanjay R Mehta <sanju.mehta@amd.com>
---
 drivers/gpu/drm/amd/dal/include/dal_interface.h               | 10 +---------
 drivers/gpu/drm/amd/dal/include/timing_list_query_interface.h |  6 +++---
 drivers/gpu/drm/amd/dal/interface/timing_list_query.c         |  6 +++---
 3 files changed, 7 insertions(+), 15 deletions(-)

diff --git a/drivers/gpu/drm/amd/dal/include/dal_interface.h b/drivers/gpu/drm/amd/dal/include/dal_interface.h
index 944bdbb..a2253be 100644
--- a/drivers/gpu/drm/amd/dal/include/dal_interface.h
+++ b/drivers/gpu/drm/amd/dal/include/dal_interface.h
@@ -31,6 +31,7 @@
 #include "set_mode_types.h"
 #include "plane_types.h"
 #include "dcs_types.h"
+#include "timing_list_query_interface.h"
 
 struct dal;
 struct dal_to_path_mode_set;
@@ -163,15 +164,6 @@ uint32_t dal_get_interrupt_source(const struct dal_display_index_set *set,
 struct dal_timing_list_query *dal_create_timing_list_query(struct dal *dal,
 	uint32_t display_index);
 
-void dal_timing_list_query_destroy(struct dal_timing_list_query **tl_q);
-
-uint32_t dal_timing_list_query_get_mode_timing_count(
-	struct dal_timing_list_query *tl_q);
-
-/* get mode timing at an index in the list */
-const struct mode_timing *dal_timing_list_query_get_mode_timing_at_index(
-	struct dal_timing_list_query *tl_q, uint32_t index);
-
 /*hard code color square at CRTC0 for HDMI light up*/
 void dal_set_crtc_test_pattern(struct dal *dal);
 
diff --git a/drivers/gpu/drm/amd/dal/include/timing_list_query_interface.h b/drivers/gpu/drm/amd/dal/include/timing_list_query_interface.h
index 0f1ab36..988147b 100644
--- a/drivers/gpu/drm/amd/dal/include/timing_list_query_interface.h
+++ b/drivers/gpu/drm/amd/dal/include/timing_list_query_interface.h
@@ -60,11 +60,11 @@ void dal_timing_list_query_destroy(struct dal_timing_list_query **tlsq);
 
 /* Get count of mode timings in the list. */
 uint32_t dal_timing_list_query_get_mode_timing_count(
-		struct dal_timing_list_query *tlsq);
+	const struct dal_timing_list_query *tlsq);
 
 const struct mode_timing *dal_timing_list_query_get_mode_timing_at_index(
-		struct dal_timing_list_query *tlsq,
-		uint32_t index);
+	const struct dal_timing_list_query *tlsq,
+	uint32_t index);
 
 /**
   *****************************************************************************
diff --git a/drivers/gpu/drm/amd/dal/interface/timing_list_query.c b/drivers/gpu/drm/amd/dal/interface/timing_list_query.c
index d551288..a3c169b 100644
--- a/drivers/gpu/drm/amd/dal/interface/timing_list_query.c
+++ b/drivers/gpu/drm/amd/dal/interface/timing_list_query.c
@@ -146,7 +146,7 @@ void dal_timing_list_query_destroy(struct dal_timing_list_query **tlsq)
 
 /* Get count of mode timings in the list. */
 uint32_t dal_timing_list_query_get_mode_timing_count(
-		struct dal_timing_list_query *tlsq)
+	const struct dal_timing_list_query *tlsq)
 {
 	if (NULL == tlsq) {
 		/* getting here if OS ignores error in
@@ -159,8 +159,8 @@ uint32_t dal_timing_list_query_get_mode_timing_count(
 }
 
 const struct mode_timing *dal_timing_list_query_get_mode_timing_at_index(
-		struct dal_timing_list_query *tlsq,
-		uint32_t index)
+	const struct dal_timing_list_query *tlsq,
+	uint32_t index)
 {
 	if (NULL == tlsq) {
 		/* getting here if OS ignores error in
-- 
1.9.1

