From eddbb9ad2edd22a5307e9ba000fc9a0979030064 Mon Sep 17 00:00:00 2001
From: Awais Belal <awais_belal@mentor.com>
Date: Wed, 31 May 2017 12:38:07 +0500
Subject: [PATCH] obey CMAKE_INSTALL_LIBDIR

If the path to CMAKE_INSTALL_LIBDIR is not followed appropriately
the installation will not work correctly on a multilib platofrm.

Signed-off-by: Awais Belal <awais_belal@mentor.com>
---
 source/CMakeLists.txt     | 4 ++--
 source/opt/CMakeLists.txt | 4 ++--
 2 files changed, 4 insertions(+), 4 deletions(-)

diff --git a/source/CMakeLists.txt b/source/CMakeLists.txt
index 5586216..43d5be5 100644
--- a/source/CMakeLists.txt
+++ b/source/CMakeLists.txt
@@ -279,5 +279,5 @@ target_include_directories(${SPIRV_TOOLS}
 
 install(TARGETS ${SPIRV_TOOLS}
   RUNTIME DESTINATION bin
-  LIBRARY DESTINATION lib
-  ARCHIVE DESTINATION lib)
+  LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
+  ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR})
diff --git a/source/opt/CMakeLists.txt b/source/opt/CMakeLists.txt
index f1420e8..abc191f 100644
--- a/source/opt/CMakeLists.txt
+++ b/source/opt/CMakeLists.txt
@@ -65,5 +65,5 @@ target_link_libraries(SPIRV-Tools-opt
 
 install(TARGETS SPIRV-Tools-opt
   RUNTIME DESTINATION bin
-  LIBRARY DESTINATION lib
-  ARCHIVE DESTINATION lib)
+  LIBRARY DESTINATION ${CMAKE_INSTALL_LIBDIR}
+  ARCHIVE DESTINATION ${CMAKE_INSTALL_LIBDIR})
-- 
2.11.1

