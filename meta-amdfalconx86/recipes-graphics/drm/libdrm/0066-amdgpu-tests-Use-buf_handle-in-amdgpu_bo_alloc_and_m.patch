From b60a7c0a502acd50023eee5b81a53175cd37046d Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Michel=20D=C3=A4nzer?= <michel.daenzer@amd.com>
Date: Tue, 21 Jul 2015 17:51:27 +0900
Subject: [PATCH 66/67] amdgpu/tests: Use buf_handle in
 amdgpu_bo_alloc_and_map() error paths
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

The compiler pointed out that bo has the wrong type.

Reviewed-by: Christian KÃ¶nig <christian.koenig@amd.com>
Signed-off-by: Arindam Nath <arindam.nath@amd.com>
---
 tests/amdgpu/amdgpu_test.h | 6 +++---
 1 file changed, 3 insertions(+), 3 deletions(-)

diff --git a/tests/amdgpu/amdgpu_test.h b/tests/amdgpu/amdgpu_test.h
index 1f4bdd7..fca92ad 100644
--- a/tests/amdgpu/amdgpu_test.h
+++ b/tests/amdgpu/amdgpu_test.h
@@ -201,13 +201,13 @@ amdgpu_bo_alloc_and_map(amdgpu_device_handle dev, unsigned size,
 	return 0;
 
 error_cpu_map:
-	amdgpu_bo_cpu_unmap(bo);
+	amdgpu_bo_cpu_unmap(buf_handle);
 
 error_va_map:
-	amdgpu_bo_va_op(bo, 0, size, vmc_addr, 0, AMDGPU_VA_OP_UNMAP);
+	amdgpu_bo_va_op(buf_handle, 0, size, vmc_addr, 0, AMDGPU_VA_OP_UNMAP);
 
 error_va_alloc:
-	amdgpu_bo_free(bo);
+	amdgpu_bo_free(buf_handle);
 	return r;
 }
 
-- 
1.9.1

