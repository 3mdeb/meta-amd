From d8c9da95cf487e81bae65de365c41a9f2e372ff6 Mon Sep 17 00:00:00 2001
From: Mykola Lysenko <mykola.lysenko@amd.com>
Date: Mon, 22 Jun 2015 07:34:55 -0400
Subject: [PATCH 292/401] amd/dal: update MM in case timing were added from OS

Signed-off-by: Mykola Lysenko <mykola.lysenko@amd.com>
Reviewed-by: Eagle Yeh <Eagle.Yeh@amd.com>
Reviewed-by: Harry Wentland <Harry.Wentland@amd.com>
Signed-off-by: Sanjay R Mehta <sanju.mehta@amd.com>
---
 drivers/gpu/drm/amd/dal/interface/timing_list_query.c | 6 +++++-
 1 file changed, 5 insertions(+), 1 deletion(-)

diff --git a/drivers/gpu/drm/amd/dal/interface/timing_list_query.c b/drivers/gpu/drm/amd/dal/interface/timing_list_query.c
index a3c169b..122e895 100644
--- a/drivers/gpu/drm/amd/dal/interface/timing_list_query.c
+++ b/drivers/gpu/drm/amd/dal/interface/timing_list_query.c
@@ -352,8 +352,12 @@ bool dal_timing_list_query_add_timing(struct dal_timing_list_query *tlsq,
 		}
 	}
 
-	if (ret)
+	if (ret) {
+		dal_mode_manager_update_disp_path_func_view_tbl(
+			dal_get_mode_manager(tlsq->parent_dal),
+			tlsq->display_index);
 		tlsq->added_timing_count++;
+	}
 
 	return ret;
 }
-- 
1.9.1

