From 072fd8a3e9335937bf5a2fe7c6cb3556f408e4c2 Mon Sep 17 00:00:00 2001
From: Leo Liu <leo.liu@amd.com>
Date: Fri, 25 Oct 2013 10:00:29 -0400
Subject: [PATCH 05/27] st/omx/h264: fix an error for pic_order_cnt_type 1

Signed-off-by: Leo Liu <leo.liu@amd.com>
---
 src/gallium/state_trackers/omx/vid_dec_h264.c |    2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/src/gallium/state_trackers/omx/vid_dec_h264.c b/src/gallium/state_trackers/omx/vid_dec_h264.c
index 6e8df74..072bbd7 100644
--- a/src/gallium/state_trackers/omx/vid_dec_h264.c
+++ b/src/gallium/state_trackers/omx/vid_dec_h264.c
@@ -775,7 +775,7 @@ static void slice_header(vid_dec_PrivateType *priv, struct vl_rbsp *rbsp,
             ExpectedDeltaPerPicOrderCntCycle += sps->offset_for_ref_frame[i];
 
          expectedPicOrderCnt = picOrderCntCycleCnt * ExpectedDeltaPerPicOrderCntCycle;
-         for (i = 0; i < frameNumInPicOrderCntCycle; ++i)
+         for (i = 0; i <= frameNumInPicOrderCntCycle; ++i)
             expectedPicOrderCnt += sps->offset_for_ref_frame[i];
 
       } else
-- 
1.7.9.5

