From 0ae4be27f9117c617fc26b6f339ef19887083c79 Mon Sep 17 00:00:00 2001
From: Leo Liu <leo.liu@amd.com>
Date: Mon, 3 Apr 2017 14:59:15 -0400
Subject: [PATCH 36/38] tests/amdgpu: move decode sum to common
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Signed-off-by: Leo Liu <leo.liu@amd.com>
Acked-by: Christian KÃ¶nig <christian.koenig@amd.com>
---
 tests/amdgpu/cs_tests.c        | 2 +-
 tests/amdgpu/decode_messages.h | 2 ++
 2 files changed, 3 insertions(+), 1 deletion(-)

diff --git a/tests/amdgpu/cs_tests.c b/tests/amdgpu/cs_tests.c
index fe78326..081ec9c 100644
--- a/tests/amdgpu/cs_tests.c
+++ b/tests/amdgpu/cs_tests.c
@@ -378,7 +378,7 @@ static void amdgpu_cs_uvd_decode(void)
 	/* TODO: use a real CRC32 */
 	for (i = 0, sum = 0; i < dt_size; ++i)
 		sum += ptr[i];
-	CU_ASSERT_EQUAL(sum, 0x20345d8);
+	CU_ASSERT_EQUAL(sum, SUM_DECODE);
 
 	r = amdgpu_bo_cpu_unmap(buf_handle);
 	CU_ASSERT_EQUAL(r, 0);
diff --git a/tests/amdgpu/decode_messages.h b/tests/amdgpu/decode_messages.h
index edfba3b..c5c96f8 100644
--- a/tests/amdgpu/decode_messages.h
+++ b/tests/amdgpu/decode_messages.h
@@ -24,6 +24,8 @@
 #ifndef _DECODE_MESSAGES_H_
 #define _DECODE_MESSAGES_H_
 
+#define SUM_DECODE 0x20345d8
+
 static const uint8_t uvd_create_msg[] = {
 	0xe4,0x0d,0x00,0x00,0x00,0x00,0x00,0x00,0x03,0x00,0x44,0x40,0x00,0x00,0x00,0x00,
 	0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x60,0x03,0x00,0x00,
-- 
2.7.4

