From b2af15453cda44fd7d2af0f401a47dd1373720e8 Mon Sep 17 00:00:00 2001
From: Mykola Lysenko <mykola.lysenko@amd.com>
Date: Wed, 24 Jun 2015 07:27:16 -0400
Subject: [PATCH 293/343] drm/amd/amdgpu: small improvement in Makefile

Signed-off-by: Harry Wentland <harry.wentland@amd.com>
Reviewed-by: Harry Wentland <harry.wentland@amd.com>
Signed-off-by: Sanjay R Mehta <sanju.mehta@amd.com>
---
 drivers/gpu/drm/amd/amdgpu/Makefile | 27 +++++++++++++++------------
 1 file changed, 15 insertions(+), 12 deletions(-)

diff --git a/drivers/gpu/drm/amd/amdgpu/Makefile b/drivers/gpu/drm/amd/amdgpu/Makefile
index 187374f..aa74cbe 100644
--- a/drivers/gpu/drm/amd/amdgpu/Makefile
+++ b/drivers/gpu/drm/amd/amdgpu/Makefile
@@ -2,14 +2,18 @@
 # Makefile for the drm device driver.  This driver provides support for the
 # Direct Rendering Infrastructure (DRI) in XFree86 4.1.0 and higher.
 
-ccflags-y := -Iinclude/drm -Idrivers/gpu/drm/amd/include/asic_reg \
-		-Idrivers/gpu/drm/amd/include \
-		-Idrivers/gpu/drm/amd/include/bus \
-		-Idrivers/gpu/drm/amd/acp/include \
-		-Idrivers/gpu/drm/amd/amdgpu \
-		-Idrivers/gpu/drm/amd/dal \
-		-Idrivers/gpu/drm/amd/dal/include \
-		-Idrivers/gpu/drm/amd/dsat
+FULL_AMD_PATH=drivers/gpu/drm/amd
+DAL_FOLDER_NAME=dal
+FULL_AMD_DAL_PATH = $(FULL_AMD_PATH)/$(DAL_FOLDER_NAME)
+
+ccflags-y := -Iinclude/drm -I$(FULL_AMD_PATH)/include/asic_reg \
+		-I$(FULL_AMD_PATH)/include \
+		-I$(FULL_AMD_PATH)/include/bus \
+		-I$(FULL_AMD_PATH)/acp/include \
+		-I$(FULL_AMD_PATH)/amdgpu \
+		-I$(FULL_AMD_DAL_PATH) \
+		-I$(FULL_AMD_DAL_PATH)/include \
+		-I$(FULL_AMD_PATH)/dsat
 		
 amdgpu-y := amdgpu_drv.o
 
@@ -85,7 +89,7 @@ ifneq ($(CONFIG_DRM_AMD_ACP),)
 amdgpu-y += amdgpu_acp.o
 
 AMDACPPATH := ../acp
-include drivers/gpu/drm/amd/acp/Makefile
+include $(FULL_AMD_PATH)/acp/Makefile
 
 amdgpu-y += $(AMD_ACP_FILES)
 endif
@@ -99,13 +103,12 @@ ifneq ($(CONFIG_DRM_AMD_DAL),)
 amdgpu-y += amdgpu_dal_services.o amdgpu_dm_types.o amdgpu_dm.o \
 	amdgpu_dm_irq.o
 
-FULL_AMD_DAL_PATH = drivers/gpu/drm/amd/dal
-RELATIVE_AMD_DAL_PATH = ../dal
+RELATIVE_AMD_DAL_PATH = ../$(DAL_FOLDER_NAME)
 include $(FULL_AMD_DAL_PATH)/Makefile
 
 amdgpu-y += $(AMD_DAL_FILES)
 
-include drivers/gpu/drm/amd/dsat/Makefile
+include $(FULL_AMD_PATH)/dsat/Makefile
 
 endif
 
-- 
1.9.1

