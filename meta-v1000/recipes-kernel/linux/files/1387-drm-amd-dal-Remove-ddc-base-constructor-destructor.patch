From 7cd05d8f7bbef228f47ae1807c37430d062654ae Mon Sep 17 00:00:00 2001
From: Harry Wentland <harry.wentland@amd.com>
Date: Thu, 13 Oct 2016 18:48:14 -0400
Subject: [PATCH 1387/1722] drm/amd/dal: Remove ddc base constructor/destructor

Change-Id: I1fa3b3f536b0d9ef685799cf81e28ba1cb46b04c
Signed-off-by: Harry Wentland <harry.wentland@amd.com>
Acked-by: Harry Wentland <harry.wentland@amd.com>
---
 drivers/gpu/drm/amd/dal/dc/gpio/dce110/hw_ddc_dce110.c |  4 ++--
 drivers/gpu/drm/amd/dal/dc/gpio/dce80/hw_ddc_dce80.c   |  4 ++--
 .../gpu/drm/amd/dal/dc/gpio/diagnostics/hw_ddc_diag.c  |  2 +-
 drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.c               | 18 ------------------
 drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.h               | 10 +---------
 5 files changed, 6 insertions(+), 32 deletions(-)

diff --git a/drivers/gpu/drm/amd/dal/dc/gpio/dce110/hw_ddc_dce110.c b/drivers/gpu/drm/amd/dal/dc/gpio/dce110/hw_ddc_dce110.c
index ae3748f..6973475 100644
--- a/drivers/gpu/drm/amd/dal/dc/gpio/dce110/hw_ddc_dce110.c
+++ b/drivers/gpu/drm/amd/dal/dc/gpio/dce110/hw_ddc_dce110.c
@@ -38,7 +38,7 @@
 static void destruct(
 	struct hw_ddc *pin)
 {
-	dal_hw_ddc_destruct(pin);
+	dal_hw_gpio_destruct(&pin->base);
 }
 
 static void destroy(
@@ -652,7 +652,7 @@ static bool construct(
 		return false;
 	}
 
-	if (!dal_hw_ddc_construct(pin, id, en, ctx)) {
+	if (!dal_hw_gpio_construct(&pin->base, id, en, ctx)) {
 		ASSERT_CRITICAL(false);
 		return false;
 	}
diff --git a/drivers/gpu/drm/amd/dal/dc/gpio/dce80/hw_ddc_dce80.c b/drivers/gpu/drm/amd/dal/dc/gpio/dce80/hw_ddc_dce80.c
index 2f12511..ba2bd9a 100644
--- a/drivers/gpu/drm/amd/dal/dc/gpio/dce80/hw_ddc_dce80.c
+++ b/drivers/gpu/drm/amd/dal/dc/gpio/dce80/hw_ddc_dce80.c
@@ -37,7 +37,7 @@
 static void destruct(
 	struct hw_ddc *pin)
 {
-	dal_hw_ddc_destruct(pin);
+	dal_hw_gpio_destruct(&pin->base);
 }
 
 static void destroy(
@@ -651,7 +651,7 @@ static bool construct(
 		return false;
 	}
 
-	if (!dal_hw_ddc_construct(pin, id, en, ctx)) {
+	if (!dal_hw_gpio_construct(&pin->base, id, en, ctx)) {
 		ASSERT_CRITICAL(false);
 		return false;
 	}
diff --git a/drivers/gpu/drm/amd/dal/dc/gpio/diagnostics/hw_ddc_diag.c b/drivers/gpu/drm/amd/dal/dc/gpio/diagnostics/hw_ddc_diag.c
index 07bed15..9863159 100644
--- a/drivers/gpu/drm/amd/dal/dc/gpio/diagnostics/hw_ddc_diag.c
+++ b/drivers/gpu/drm/amd/dal/dc/gpio/diagnostics/hw_ddc_diag.c
@@ -38,7 +38,7 @@
 static void destruct(
 	struct hw_ddc *pin)
 {
-	dal_hw_ddc_destruct(pin);
+	dal_hw_gpio_destruct(&pin->base);
 }
 
 static void destroy(
diff --git a/drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.c b/drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.c
index 970966b..82f24fb 100644
--- a/drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.c
+++ b/drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.c
@@ -76,21 +76,3 @@ bool dal_hw_ddc_open(
 
 	return dal_hw_gpio_open(ptr, mode, options);
 }
-
-bool dal_hw_ddc_construct(
-	struct hw_ddc *pin,
-	enum gpio_id id,
-	uint32_t en,
-	struct dc_context *ctx)
-{
-	if (!dal_hw_gpio_construct(&pin->base, id, en, ctx))
-		return false;
-
-	return true;
-}
-
-void dal_hw_ddc_destruct(
-	struct hw_ddc *pin)
-{
-	dal_hw_gpio_destruct(&pin->base);
-}
diff --git a/drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.h b/drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.h
index 557c84a..9a00d02 100644
--- a/drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.h
+++ b/drivers/gpu/drm/amd/dal/dc/gpio/hw_ddc.h
@@ -34,18 +34,10 @@ struct hw_ddc {
 #define HW_DDC_FROM_BASE(hw_gpio) \
 	container_of((HW_GPIO_FROM_BASE(hw_gpio)), struct hw_ddc, base)
 
-bool dal_hw_ddc_construct(
-	struct hw_ddc *pin,
-	enum gpio_id id,
-	uint32_t en,
-	struct dc_context *ctx);
-
-void dal_hw_ddc_destruct(
-	struct hw_ddc *pin);
-
 bool dal_hw_ddc_open(
 	struct hw_gpio_pin *ptr,
 	enum gpio_mode mode,
 	void *options);
 
+
 #endif
-- 
2.7.4

