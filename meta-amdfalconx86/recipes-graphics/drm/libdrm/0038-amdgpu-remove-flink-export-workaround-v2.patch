From d07cbaf6ae15866eaf0ddf486726ce9f8e2c1a28 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Christian=20K=C3=B6nig?= <christian.koenig@amd.com>
Date: Sat, 6 Jun 2015 12:02:29 +0200
Subject: [PATCH 38/55] amdgpu: remove flink export workaround v2
MIME-Version: 1.0
Content-Type: text/plain; charset=UTF-8
Content-Transfer-Encoding: 8bit

Alternative solution to Mareks patch to stop causing trouble with render nodes.

v2: rebased

Signed-off-by: Christian KÃ¶nig <christian.koenig@amd.com>
Reviewed-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Arindam Nath <arindam.nath@amd.com>
---
 amdgpu/amdgpu_bo.c | 6 ------
 1 file changed, 6 deletions(-)

diff --git a/amdgpu/amdgpu_bo.c b/amdgpu/amdgpu_bo.c
index 961ab04..72688d4 100644
--- a/amdgpu/amdgpu_bo.c
+++ b/amdgpu/amdgpu_bo.c
@@ -337,12 +337,6 @@ int amdgpu_bo_export(amdgpu_bo_handle bo,
 		return 0;
 
 	case amdgpu_bo_handle_type_kms:
-		/* don't check the return value, because exporting KMS
-		 * handles should work with render nodes too, which don't
-		 * support flink exports
-		 */
-		amdgpu_bo_export_flink(bo);
-
 		amdgpu_add_handle_to_table(bo);
 		*shared_handle = bo->handle;
 		return 0;
-- 
1.9.1

