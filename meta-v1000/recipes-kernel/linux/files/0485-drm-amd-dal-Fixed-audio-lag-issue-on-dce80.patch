From 0450761b3174847bc8aa311f1053de8eed4a0168 Mon Sep 17 00:00:00 2001
From: Yongqiang Sun <yongqiang.sun@amd.com>
Date: Fri, 13 May 2016 11:25:51 -0400
Subject: [PATCH 0485/1722] drm/amd/dal: Fixed audio lag issue on dce80.

Signed-off-by: Yongqiang Sun <yongqiang.sun@amd.com>
Acked-by: Jordan Lazare <Jordan.Lazare@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Kalyan Alle <kalyan.alle@amd.com>
---
 drivers/gpu/drm/amd/dal/dc/gpu/dce80/display_clock_dce80.c | 10 +++-------
 1 file changed, 3 insertions(+), 7 deletions(-)

diff --git a/drivers/gpu/drm/amd/dal/dc/gpu/dce80/display_clock_dce80.c b/drivers/gpu/drm/amd/dal/dc/gpu/dce80/display_clock_dce80.c
index 313651c..dc1dccd 100644
--- a/drivers/gpu/drm/amd/dal/dc/gpu/dce80/display_clock_dce80.c
+++ b/drivers/gpu/drm/amd/dal/dc/gpu/dce80/display_clock_dce80.c
@@ -727,12 +727,11 @@ static bool display_clock_integrated_info_construct(
 	struct display_clock_dce80 *disp_clk,
 	struct adapter_service *as)
 {
-	struct integrated_info info;
-	struct firmware_info fw_info;
-	bool res;
+	struct integrated_info info = { { { 0 } } };
+	struct firmware_info fw_info = { { 0 } };
 	uint32_t i;
 
-	res = dal_adapter_service_get_integrated_info(as, &info);
+	dal_adapter_service_get_integrated_info(as, &info);
 
 	disp_clk->dentist_vco_freq_khz = info.dentist_vco_freq;
 	if (disp_clk->dentist_vco_freq_khz == 0) {
@@ -745,9 +744,6 @@ static bool display_clock_integrated_info_construct(
 	disp_clk->disp_clk.min_display_clk_threshold_khz =
 		disp_clk->dentist_vco_freq_khz / 64;
 
-	if (!res)
-		return false;
-
 	/* TODO: initialise disp_clk->dfs_bypass_disp_clk */
 
 	/*update the maximum display clock for each power state*/
-- 
2.7.4

