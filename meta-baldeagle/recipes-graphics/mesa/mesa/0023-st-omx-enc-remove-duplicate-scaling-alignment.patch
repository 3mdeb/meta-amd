From e7dcff1a02c0dc9c60ab3fadac381b61db6dfd7b Mon Sep 17 00:00:00 2001
From: Leo Liu <leo.liu@amd.com>
Date: Tue, 4 Feb 2014 10:01:36 -0500
Subject: [PATCH 23/27] st/omx/enc: remove duplicate scaling alignment

Signed-off-by: Leo Liu <leo.liu@amd.com>
---
 src/gallium/state_trackers/omx/vid_enc.c |    8 ++++----
 1 file changed, 4 insertions(+), 4 deletions(-)

diff --git a/src/gallium/state_trackers/omx/vid_enc.c b/src/gallium/state_trackers/omx/vid_enc.c
index 1290111..3c08dd4 100644
--- a/src/gallium/state_trackers/omx/vid_enc.c
+++ b/src/gallium/state_trackers/omx/vid_enc.c
@@ -468,8 +468,8 @@ static OMX_ERRORTYPE vid_enc_SetConfig(OMX_HANDLETYPE handle, OMX_INDEXTYPE idx,
  
          templat.buffer_format = PIPE_FORMAT_NV12;
          templat.chroma_format = PIPE_VIDEO_CHROMA_FORMAT_420;
-         templat.width = align(priv->scale.xWidth, 16); 
-         templat.height = align(priv->scale.xHeight, 16); 
+         templat.width = priv->scale.xWidth; 
+         templat.height = priv->scale.xHeight; 
          templat.interlaced = false;
          priv->scale_buffer = priv->pipe->create_video_buffer(priv->pipe, &templat);
          if (!priv->scale_buffer)
@@ -529,8 +529,8 @@ static OMX_ERRORTYPE vid_enc_MessageHandler(OMX_COMPONENTTYPE* comp, internalReq
          templat.profile = PIPE_VIDEO_PROFILE_MPEG4_AVC_BASELINE;
          templat.entrypoint = PIPE_VIDEO_ENTRYPOINT_ENCODE;
          templat.chroma_format = PIPE_VIDEO_CHROMA_FORMAT_420;
-         templat.width = priv->scale_buffer ? align(priv->scale.xWidth, 16) : port->sPortParam.format.video.nFrameWidth;
-         templat.height = priv->scale_buffer ? align(priv->scale.xHeight, 16) : port->sPortParam.format.video.nFrameHeight;
+         templat.width = priv->scale_buffer ? priv->scale.xWidth : port->sPortParam.format.video.nFrameWidth;
+         templat.height = priv->scale_buffer ? priv->scale.xHeight : port->sPortParam.format.video.nFrameHeight;
          templat.max_references = 1;
 
          priv->codec = priv->pipe->create_video_codec(priv->pipe, &templat);
-- 
1.7.9.5

