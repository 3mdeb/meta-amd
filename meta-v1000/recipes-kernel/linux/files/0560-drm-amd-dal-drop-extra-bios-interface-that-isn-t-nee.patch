From 5f87a18ac5a2eb50dfbd0fd83645fd09544a63f0 Mon Sep 17 00:00:00 2001
From: Dave Airlie <airlied@redhat.com>
Date: Tue, 12 Apr 2016 13:07:33 +1000
Subject: [PATCH 0560/1722] drm/amd/dal: drop extra bios interface that isn't
 needed.

Signed-off-by: Dave Airlie <airlied@redhat.com>
Acked-by: Harry Wentland <harry.wentland@amd.com>
Signed-off-by: Alex Deucher <alexander.deucher@amd.com>
Signed-off-by: Kalyan Alle <kalyan.alle@amd.com>
---
 drivers/gpu/drm/amd/dal/dc/bios/command_table.c | 14 ++++++++++++-
 drivers/gpu/drm/amd/dal/dc/dm_services.h        | 26 -------------------------
 2 files changed, 13 insertions(+), 27 deletions(-)

diff --git a/drivers/gpu/drm/amd/dal/dc/bios/command_table.c b/drivers/gpu/drm/amd/dal/dc/bios/command_table.c
index 802ebef..06798cd 100644
--- a/drivers/gpu/drm/amd/dal/dc/bios/command_table.c
+++ b/drivers/gpu/drm/amd/dal/dc/bios/command_table.c
@@ -44,7 +44,7 @@
 		GetIndexIntoMasterTable(COMMAND, command), &frev, &crev)
 
 #define BIOS_CMD_TABLE_PARA_REVISION(command)\
-	dm_bios_cmd_table_para_revision(bp->ctx, \
+	bios_cmd_table_para_revision(bp->ctx->cgs_device, \
 		GetIndexIntoMasterTable(COMMAND, command))
 
 static void init_dig_encoder_control(struct bios_parser *bp);
@@ -90,6 +90,18 @@ void dal_bios_parser_init_cmd_tbl(struct bios_parser *bp)
 	init_set_dce_clock(bp);
 }
 
+static uint32_t bios_cmd_table_para_revision(void *cgs_device,
+					     uint32_t index)
+{
+	uint8_t frev, crev;
+
+	if (cgs_atom_get_cmd_table_revs(cgs_device,
+					index,
+					&frev, &crev) != 0)
+		return 0;
+	return crev;
+}
+
 /*******************************************************************************
  ********************************************************************************
  **
diff --git a/drivers/gpu/drm/amd/dal/dc/dm_services.h b/drivers/gpu/drm/amd/dal/dc/dm_services.h
index f92d754..c36a95d 100644
--- a/drivers/gpu/drm/amd/dal/dc/dm_services.h
+++ b/drivers/gpu/drm/amd/dal/dc/dm_services.h
@@ -139,32 +139,6 @@ static inline uint32_t set_reg_field_value_ex(
 		reg_name ## __ ## reg_field ## _MASK,\
 		reg_name ## __ ## reg_field ## __SHIFT)
 
-/*
- * atombios services
- */
-
-bool dm_exec_bios_cmd_table(
-	struct dc_context *ctx,
-	uint32_t index,
-	void *params);
-
-static inline uint32_t dm_bios_cmd_table_para_revision(
-	struct dc_context *ctx,
-	uint32_t index)
-{
-	uint8_t frev;
-	uint8_t crev;
-
-	if (cgs_atom_get_cmd_table_revs(
-			ctx->cgs_device,
-			index,
-			&frev,
-			&crev) != 0)
-		return 0;
-
-	return crev;
-}
-
 /**************************************
  * Power Play (PP) interfaces
  **************************************/
-- 
2.7.4

