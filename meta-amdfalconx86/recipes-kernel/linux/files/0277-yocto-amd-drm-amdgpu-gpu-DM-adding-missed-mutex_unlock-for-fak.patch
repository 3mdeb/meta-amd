From d350ff405babbadeaa2ecbb5579d6a08b8af948a Mon Sep 17 00:00:00 2001
From: Harry Wentland <harry.wentland@amd.com>
Date: Wed, 26 Aug 2015 10:19:30 -0400
Subject: [PATCH 394/401] gpu/drm/amdgpu: [DM] adding missed mutex_unlock for
 fake display

Signed-off-by: Harry Wentland <harry.wentland@amd.com>
Signed-off-by: Sanjay R Mehta <sanju.mehta@amd.com>
---
 drivers/gpu/drm/amd/amdgpu/amdgpu_dm.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_dm.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_dm.c
index 6abafc6..76a306b 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_dm.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_dm.c
@@ -478,6 +478,8 @@ static void amdgpu_dm_hpd_low_irq(void *interrupt_params)
 		adev->dm.fake_display_index = INVALID_DISPLAY_INDEX;
 
 		trigger_drm_hpd_event = true;
+	} else {
+		mutex_unlock(&adev->dm.dal_mutex);
 	}
 
 	if (true == trigger_drm_hpd_event)
-- 
1.9.1

